#ifndef FASTJSON_CONFIG_H
#define FASTJSON_CONFIG_H

// FastestJSONInTheWest Configuration Header
// Generated by CMake - Do not edit manually

// Version information
#define FASTJSON_VERSION_MAJOR @PROJECT_VERSION_MAJOR@
#define FASTJSON_VERSION_MINOR @PROJECT_VERSION_MINOR@
#define FASTJSON_VERSION_PATCH @PROJECT_VERSION_PATCH@
#define FASTJSON_VERSION_STRING "@PROJECT_VERSION@"

// Compiler information
#cmakedefine FASTJSON_COMPILER_GCC
#cmakedefine FASTJSON_COMPILER_CLANG
#cmakedefine FASTJSON_COMPILER_MSVC

// Platform information
#cmakedefine FASTJSON_PLATFORM_WINDOWS
#cmakedefine FASTJSON_PLATFORM_LINUX
#cmakedefine FASTJSON_PLATFORM_MACOS

// Architecture information
#cmakedefine FASTJSON_ARCH_X86_64
#cmakedefine FASTJSON_ARCH_ARM64
#cmakedefine FASTJSON_ARCH_X86

// C++23 Feature availability
#cmakedefine FASTJSON_HAVE_EXPECTED
#cmakedefine FASTJSON_HAVE_SPAN
#cmakedefine FASTJSON_HAVE_RANGES
#cmakedefine FASTJSON_HAVE_CONCEPTS
#cmakedefine FASTJSON_HAVE_FORMAT
#cmakedefine FASTJSON_HAVE_SOURCE_LOCATION
#cmakedefine FASTJSON_HAVE_COROUTINES

// SIMD instruction set support
#cmakedefine FASTJSON_HAVE_SSE2
#cmakedefine FASTJSON_HAVE_SSE4_1
#cmakedefine FASTJSON_HAVE_AVX
#cmakedefine FASTJSON_HAVE_AVX2
#cmakedefine FASTJSON_HAVE_AVX512
#cmakedefine FASTJSON_HAVE_NEON
#cmakedefine FASTJSON_HAVE_SVE

// Platform features
#cmakedefine FASTJSON_HAVE_MMAP
#cmakedefine FASTJSON_HAVE_LARGE_FILE_SUPPORT
#cmakedefine FASTJSON_HAVE_THREAD_LOCAL

// Compiler optimizations
#cmakedefine FASTJSON_HAVE_LTO
#cmakedefine FASTJSON_HAVE_PGO
#cmakedefine FASTJSON_HAVE_FUNCTION_MULTIVERSIONING

// Optional feature availability
#cmakedefine FASTJSON_HAVE_CUDA
#cmakedefine FASTJSON_HAVE_OPENCL
#cmakedefine FASTJSON_HAVE_OPENMP
#cmakedefine FASTJSON_HAVE_MPI
#cmakedefine FASTJSON_HAVE_IMGUI

// Feature toggles (can be disabled even if available)
#cmakedefine FASTJSON_ENABLE_SIMD
#cmakedefine FASTJSON_ENABLE_GPU
#cmakedefine FASTJSON_ENABLE_OPENMP
#cmakedefine FASTJSON_ENABLE_SIMULATOR
#cmakedefine FASTJSON_ENABLE_DISTRIBUTED

// Build configuration
#cmakedefine FASTJSON_DEBUG
#cmakedefine FASTJSON_RELEASE

// API macros
#if defined(_WIN32) && defined(FASTJSON_BUILD_SHARED)
    #ifdef FASTJSON_EXPORTS
        #define FASTJSON_API __declspec(dllexport)
    #else
        #define FASTJSON_API __declspec(dllimport)
    #endif
#else
    #define FASTJSON_API
#endif

// Compiler-specific attributes
#if defined(__GNUC__) || defined(__clang__)
    #define FASTJSON_ALWAYS_INLINE __attribute__((always_inline)) inline
    #define FASTJSON_NEVER_INLINE __attribute__((noinline))
    #define FASTJSON_PURE __attribute__((pure))
    #define FASTJSON_CONST __attribute__((const))
    #define FASTJSON_HOT __attribute__((hot))
    #define FASTJSON_COLD __attribute__((cold))
    #define FASTJSON_LIKELY(x) __builtin_expect(!!(x), 1)
    #define FASTJSON_UNLIKELY(x) __builtin_expect(!!(x), 0)
    #define FASTJSON_UNREACHABLE() __builtin_unreachable()
#elif defined(_MSC_VER)
    #define FASTJSON_ALWAYS_INLINE __forceinline
    #define FASTJSON_NEVER_INLINE __declspec(noinline)
    #define FASTJSON_PURE
    #define FASTJSON_CONST
    #define FASTJSON_HOT
    #define FASTJSON_COLD
    #define FASTJSON_LIKELY(x) (x)
    #define FASTJSON_UNLIKELY(x) (x)
    #define FASTJSON_UNREACHABLE() __assume(0)
#else
    #define FASTJSON_ALWAYS_INLINE inline
    #define FASTJSON_NEVER_INLINE
    #define FASTJSON_PURE
    #define FASTJSON_CONST
    #define FASTJSON_HOT
    #define FASTJSON_COLD
    #define FASTJSON_LIKELY(x) (x)
    #define FASTJSON_UNLIKELY(x) (x)
    #define FASTJSON_UNREACHABLE() std::abort()
#endif

// Memory alignment macros
#if defined(__GNUC__) || defined(__clang__)
    #define FASTJSON_ALIGNED(n) __attribute__((aligned(n)))
    #define FASTJSON_CACHE_ALIGNED __attribute__((aligned(64)))
#elif defined(_MSC_VER)
    #define FASTJSON_ALIGNED(n) __declspec(align(n))
    #define FASTJSON_CACHE_ALIGNED __declspec(align(64))
#else
    #define FASTJSON_ALIGNED(n)
    #define FASTJSON_CACHE_ALIGNED
#endif

// SIMD availability check macros
#ifdef FASTJSON_HAVE_SSE2
    #include <emmintrin.h>
#endif

#ifdef FASTJSON_HAVE_SSE4_1
    #include <smmintrin.h>
#endif

#ifdef FASTJSON_HAVE_AVX
    #include <immintrin.h>
#endif

#ifdef FASTJSON_HAVE_AVX2
    #include <immintrin.h>
#endif

#ifdef FASTJSON_HAVE_AVX512
    #include <immintrin.h>
#endif

#ifdef FASTJSON_HAVE_NEON
    #include <arm_neon.h>
#endif

#ifdef FASTJSON_HAVE_SVE
    #include <arm_sve.h>
#endif

// Performance tuning constants
namespace fastjson {
    namespace config {
        // Default buffer sizes
        constexpr std::size_t default_parse_buffer_size = 64 * 1024;
        constexpr std::size_t default_arena_size = 1 * 1024 * 1024;
        constexpr std::size_t default_object_pool_size = 128;
        
        // SIMD vector sizes
        constexpr std::size_t sse2_vector_size = 16;
        constexpr std::size_t avx_vector_size = 32;
        constexpr std::size_t avx512_vector_size = 64;
        constexpr std::size_t neon_vector_size = 16;
        
        // Threading defaults
        constexpr std::size_t default_thread_pool_size = 0; // 0 = hardware_concurrency
        constexpr std::size_t min_chunk_size_for_parallel = 1024 * 1024;
        constexpr std::size_t min_size_for_gpu = 10 * 1024 * 1024;
        
        // Cache optimization
        constexpr std::size_t cache_line_size = 64;
        constexpr std::size_t l1_cache_size = 32 * 1024;
        constexpr std::size_t l2_cache_size = 256 * 1024;
        
        // Memory management
        constexpr std::size_t max_stack_allocation = 1024;
        constexpr std::size_t memory_alignment = 32;
        constexpr bool use_memory_mapping_for_large_files = true;
        constexpr std::size_t memory_mapping_threshold = 16 * 1024 * 1024;
    }
}

// Debug and logging macros
#ifdef FASTJSON_DEBUG
    #define FASTJSON_ASSERT(condition) \
        do { \
            if (!(condition)) { \
                std::abort(); \
            } \
        } while (0)
        
    #define FASTJSON_DEBUG_ONLY(x) x
#else
    #define FASTJSON_ASSERT(condition) ((void)0)
    #define FASTJSON_DEBUG_ONLY(x)
#endif

// Feature availability check functions
namespace fastjson {
    namespace features {
        constexpr bool has_simd() noexcept {
#ifdef FASTJSON_ENABLE_SIMD
            return true;
#else
            return false;
#endif
        }
        
        constexpr bool has_gpu() noexcept {
#ifdef FASTJSON_ENABLE_GPU
            return true;
#else
            return false;
#endif
        }
        
        constexpr bool has_openmp() noexcept {
#ifdef FASTJSON_HAVE_OPENMP
            return true;
#else
            return false;
#endif
        }
        
        constexpr bool has_simulator() noexcept {
#ifdef FASTJSON_ENABLE_SIMULATOR
            return true;
#else
            return false;
#endif
        }
    }
}

#endif // FASTJSON_CONFIG_H